{
    "name": "Saham AI - Radar Harian via API",
    "nodes": [
        {
            "parameters": {
                "rule": {
                    "interval": [
                        {
                            "field": "cronExpression",
                            "expression": "30 8 * * 1-5"
                        }
                    ]
                }
            },
            "name": "Schedule (Pagi)",
            "type": "n8n-nodes-base.scheduleTrigger",
            "position": [
                250,
                300
            ],
            "typeVersion": 1,
            "id": "1"
        },
        {
            "parameters": {
                "rule": {
                    "interval": [
                        {
                            "field": "cronExpression",
                            "expression": "35 15 * * 1-5"
                        }
                    ]
                }
            },
            "name": "Schedule (Sore)",
            "type": "n8n-nodes-base.scheduleTrigger",
            "position": [
                250,
                450
            ],
            "typeVersion": 1,
            "id": "2"
        },
        {
            "parameters": {
                "url": "=http://localhost:8000/radar",
                "sendQuery": false,
                "options": {
                    "timeout": 300000
                }
            },
            "id": "3",
            "name": "Panggil Local API (Radar)",
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 4.1,
            "position": [
                480,
                360
            ]
        },
        {
            "parameters": {
                "conditions": {
                    "string": [
                        {
                            "value1": "={{ $json.status }}",
                            "value2": "success"
                        }
                    ]
                }
            },
            "name": "Cek Status Signal",
            "type": "n8n-nodes-base.if",
            "position": [
                700,
                360
            ],
            "typeVersion": 1,
            "id": "6"
        },
        {
            "parameters": {
                "method": "POST",
                "url": "https://openrouter.ai/api/v1/chat/completions",
                "authentication": "genericCredentialType",
                "genericAuthType": "httpHeaderAuth",
                "sendBody": true,
                "bodyParameters": {
                    "parameters": [
                        {
                            "name": "model",
                            "value": "google/gemini-2.5-flash"
                        },
                        {
                            "name": "messages",
                            "value": "=[{\"role\": \"system\", \"content\": {{ JSON.stringify($json.system_prompt) }}}, {\"role\": \"user\", \"content\": \"Buatkan berita pasar berdasarkan data ini: \" + {{ JSON.stringify($json.raw_signals) }} }]"
                        }
                    ]
                },
                "options": {}
            },
            "name": "Tanya AI (OpenRouter)",
            "type": "n8n-nodes-base.httpRequest",
            "position": [
                920,
                340
            ],
            "typeVersion": 4.1,
            "credentials": {
                "httpHeaderAuth": {
                    "id": "2",
                    "name": "Header Auth account"
                }
            },
            "id": "7"
        },
        {
            "parameters": {
                "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id || 'YOUR_CHAT_ID' }}",
                "text": "={{ $json.choices[0].message.content }}",
                "additionalFields": {
                    "parse_mode": "Markdown"
                }
            },
            "name": "Kirim ke Telegram",
            "type": "n8n-nodes-base.telegram",
            "position": [
                1140,
                340
            ],
            "typeVersion": 1.1,
            "credentials": {
                "telegramApi": {
                    "id": "1",
                    "name": "Telegram account"
                }
            },
            "id": "8"
        },
        {
            "parameters": {
                "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id || 'YOUR_CHAT_ID' }}",
                "text": "Pasar hari ini kurang mendukung. Tidak ada sinyal BUY valid (skor di atas 70) yang ditemukan oleh AI Engine."
            },
            "name": "Telegram (No Signal)",
            "type": "n8n-nodes-base.telegram",
            "position": [
                920,
                540
            ],
            "typeVersion": 1.1,
            "credentials": {
                "telegramApi": {
                    "id": "1",
                    "name": "Telegram account"
                }
            },
            "id": "9"
        }
    ],
    "connections": {
        "Schedule (Pagi)": {
            "main": [
                [
                    {
                        "node": "Panggil Local API (Radar)",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Schedule (Sore)": {
            "main": [
                [
                    {
                        "node": "Panggil Local API (Radar)",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Panggil Local API (Radar)": {
            "main": [
                [
                    {
                        "node": "Cek Status Signal",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Cek Status Signal": {
            "main": [
                [
                    {
                        "node": "Tanya AI (OpenRouter)",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Telegram (No Signal)",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Tanya AI (OpenRouter)": {
            "main": [
                [
                    {
                        "node": "Kirim ke Telegram",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        }
    },
    "pinData": {}
}